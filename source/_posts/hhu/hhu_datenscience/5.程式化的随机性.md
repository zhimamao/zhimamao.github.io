---
title: Daten_Science æ€»ç»“-5
date: 2022-08-12 22:44:45
categories : 
- hhu 
- Daten_Science
tags:
password: cocovv
---


# 5. Stochastik programmieren
Wir wollen uns nun kurz damit beschÃ¤ftigen, wie sich mit Python Stichproben von Zufallsexperimenten simulieren lassen.

æˆ‘ä»¬ç°åœ¨å°†ç®€è¦åœ°çœ‹ä¸€ä¸‹Pythonå¦‚ä½•ç”¨æ¥æ¨¡æ‹Ÿéšæœºå®éªŒçš„æ ·æœ¬ã€‚
5.1 å®ç°æ¦‚ç‡æµ‹é‡

## 5.1. WahrscheinlichkeitsmaÃŸ implementieren
```python
from fractions import Fraction

def P(A, Omega):
    """Die Wahrscheinlichkeit fÃ¼r das Ereignis A,
       gegeben gleich wahrscheinliche Ergebnisse aus einem Ergebnisraum Î©."""
    return Fraction(len(A & Omega), len(Omega))
```
Wir werden damit nun einen WÃ¼rfelwurf programmieren:


```python
W = {1, 2, 3, 4, 5, 6}
gerade = set((x*2 for x in range(1,4)))
print("Gerade WÃ¼rfelaugen:",gerade)

print("Wahrscheinlichkeit fÃ¼r gerade Augenzahl:", P(gerade, W))
```

```python
Gerade WÃ¼rfelaugen: {2, 4, 6}
Wahrscheinlichkeit fÃ¼r gerade Augenzahl: 1/2
```
Damit haben wir nun das WahrscheinlichkeitsmaÃŸ. Wenn wir eine Stichprobe ziehen wollen, mÃ¼ssen wir noch irgendwo den â€Zufallâ€œ her bekommen.

æ‰€ä»¥ç°åœ¨æˆ‘ä»¬æœ‰äº†æ¦‚ç‡æµ‹é‡ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŠ½å‡ºä¸€ä¸ªæ ·æœ¬ï¼Œæˆ‘ä»¬ä»ç„¶å¿…é¡»ä»æŸä¸ªåœ°æ–¹è·å¾— "æœºä¼š"ã€‚

### 5.2. Zufall importieren

Python bietet mit dem random-Modul eine Schnittstelle zu Pseudozufallszahlen. Die Methode random.random ist ein direkt in C implementierter Mersenne Twister. Wenn man â€echteâ€œ Zufallszahlen braucht, etwa fÃ¼r kryptografische Zwecke, gibt es dazu das secrets-Modul. Den Seed fÃ¼r den Mersenne Twister kann man angeben, und sollte man auch, um Zufallssimulationen reproduzierbar zu machen.

5.2 éšæœºè¿›å£
Pythoné€šè¿‡éšæœºæ¨¡å—ä¸ºä¼ªéšæœºæ•°æä¾›äº†ä¸€ä¸ªæ¥å£ã€‚random.randomæ–¹æ³•æ˜¯ä¸€ä¸ªç›´æ¥ç”¨Cè¯­è¨€å®ç°çš„Mersenne Twisterã€‚å¦‚æœä½ éœ€è¦ "çœŸæ­£çš„ "éšæœºæ•°ï¼Œä¾‹å¦‚ç”¨äºåŠ å¯†ç›®çš„ï¼Œæœ‰ä¸€ä¸ªç§˜å¯†æ¨¡å—ã€‚Mersenne Twisterçš„ç§å­å¯ä»¥è¢«æŒ‡å®šï¼Œä¹Ÿåº”è¯¥è¢«æŒ‡å®šï¼Œä»¥ä½¿éšæœºæ¨¡æ‹Ÿå…·æœ‰å¯é‡å¤æ€§ã€‚


```python
from random import random as r
help(r)
print(r())

import random
random.seed(1)
very_random = r()
print(very_random)
assert very_random == 0.13436424411240122
```

```python
Help on built-in function random:

random() method of random.Random instance
    random() -> x in the interval [0, 1).

0.046521502197061415
0.13436424411240122
```
Aus einer (Pseudo)zufallszahl zwischen 0 und 1 (man beachte: evtl. 0 aber nie 1 ) lassen sich zufÃ¤llige WÃ¼rfelwÃ¼rfe erzeugen:

éšæœºæ·éª°å­å¯ä»¥ä»0å’Œ1ä¹‹é—´çš„ï¼ˆä¼ªï¼‰éšæœºæ•°äº§ç”Ÿï¼ˆæ³¨æ„ï¼šå¯èƒ½æ˜¯0ï¼Œä½†ç»ä¸æ˜¯1ï¼‰ã€‚

```python
from math import floor
def transform_unit_to_dice(x):
    return floor(1 + 6*x)

assert list(range(1,7)) == [transform_unit_to_dice((x-1)/6)
                            for x in range(1,7)]

print([transform_unit_to_dice(r()) for n in range(100)])
    
```

```python
[6, 5, 2, 3, 3, 4, 5, 1, 1, 6, 3, 5, 1, 3, 5, 2, 6, 6, 1, 1, 4, 6, 3, 2, 3, 1, 2, 3, 3, 2, 2, 2, 3, 2, 1, 6, 4, 4, 2, 6, 6, 1, 2, 5, 5, 6, 3, 5, 5, 2, 4, 6, 6, 4, 4, 1, 2, 5, 3, 2, 4, 5, 5, 3, 3, 4, 5, 4, 3, 3, 1, 1, 5, 6, 4, 3, 2, 4, 6, 5, 4, 6, 2, 4, 6, 4, 3, 2, 4, 6, 1, 5, 5, 6, 5, 5, 4, 4, 3, 1]
```
Damit man solche Transformationen nicht andauernd programmieren muss, kann man hier auch auf random.
randint(1,6) oder auch auf random.choice(range(1,7)) oder random.randrange(1,7) zurÃ¼ckgreifen. Dabei ist randint ein KÃ¼rzel fÃ¼r das entsprechende randrange und choice ist etwas allgemeiner.
Wir wollen aber festhalten: gegeben eine gleichverteilte â€Zufallsvariableâ€œ ğ‘‹ =random.random mit Werten in [0, 1) haben wir eine Abbildung ğ‘¡ =transform_unit_to_dice konstruiert und implementiert, die Werte in {1, 2, 3, 4, 5, 6} hat und ğ‘¡(ğ‘‹) ist gleichverteilt. Die mathematische Abbildung ğ‘¡ ist eine Zufallsvariable, wir behandeln die VerknÃ¼pfung ğ‘¡ âˆ˜ ğ‘‹ als Zufallsvariable, die den WÃ¼rfel modelliert.
Nun kÃ¶nnte man sich beschweren: random.random() nimmt gar keinen Parameter, ist also keine mathematische Abbildung von einem Definitionsbereich in die Menge [0, 1). TatsÃ¤chlich mÃ¼ssen wir uns vorstellen, dass es eine Abbildung ğ‘‹ âˆ¶ Î© â†’ [0, 1) ist, und auf Î© ein irgendwie geartetes WahrscheinlichkeitsmaÃŸ definiert ist, sodass durch ğ‘‹ auf [0, 1) die Gleichverteilung induziert wird. Die Menge Î© spielt fÃ¼r uns keine konkrete Rolle - da â€kommt der Zufall herâ€œ und in der Notation random.random() sehen wir schon, dass wir eben kein konkretes Element von Î© einsetzen, sondern pseudozufÃ¤llig eins ziehen und das in ğ‘‹ einsetzen.

# 5.3 GrÃ¶ÃŸere Stichproben
Die Methode random.sample(population, k) erlaubt es eine Stichprobe der GrÃ¶ÃŸe ğ‘˜ aus einer Population (einer Urne) zu ziehen - ziehen mit ZurÃ¼cklegen. FÃ¼r ğ‘˜ = 1 entspricht das einer Gleichverteilung auf der Population. Mit der Methode random.choices(population, weights=None, *, cum_weights=None, k=1) kann man das ziehen aus der Population ğ‘˜-mal sampeln (und dabei anstelle einer geeigneten Population auch Gewichte vergeben).

å› æ­¤ï¼Œä½ ä¸å¿…ä¸€ç›´ç¼–æ’è¿™ç§è½¬æ¢ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºã€‚

0, 1ï¼‰æˆ‘ä»¬æ„å»ºå¹¶å®ç°äº†ä¸€ä¸ªæ˜ å°„ğ‘¡ =transform_unit_to_diceï¼Œå…¶å€¼ä¸º{1, 2, 3, 4, 5, 6}ï¼Œå¹¶ä¸”ğ‘¡ï¼ˆğ‘‹ï¼‰æ˜¯å¹³å‡åˆ†å¸ƒçš„ã€‚æ•°å­¦æ˜ å°„ğ‘¡æ˜¯ä¸€ä¸ªéšæœºå˜é‡ï¼Œæˆ‘ä»¬æŠŠé“¾æ¥ğ‘¡ âˆ˜ ğ‘‹ä½œä¸ºä¸€ä¸ªéšæœºå˜é‡ï¼Œå¯¹cubeè¿›è¡Œå»ºæ¨¡ã€‚
ç°åœ¨ï¼Œæœ‰äººå¯èƒ½ä¼šæŠ±æ€¨ï¼šrandom.random()æ ¹æœ¬ä¸éœ€è¦ä»»ä½•å‚æ•°ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯ä¸€ä¸ªä»å®šä¹‰åŸŸåˆ°é›†åˆ[0, 1]çš„æ•°å­¦æ˜ å°„ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¿…é¡»æƒ³è±¡å®ƒæ˜¯ä¸€ä¸ªæ˜ å°„ ğ‘‹ âˆ¶ Î© â†’ [0, 1]ï¼Œåœ¨ Î© ä¸Šå®šä¹‰äº†æŸç§æ¦‚ç‡åº¦é‡ï¼Œå› æ­¤é€šè¿‡ ğ‘‹ åœ¨ [0, 1] ä¸Šè¯±å¯¼å‡ºå‡åŒ€åˆ†å¸ƒã€‚æ•°é‡Î©å¯¹æˆ‘ä»¬æ¥è¯´å¹¶ä¸æ‰®æ¼”å…·ä½“çš„è§’è‰²--é‚£æ˜¯ "æœºä¼šçš„æ¥æº"ï¼Œåœ¨éšæœº.éšæœº()çš„ç¬¦å·ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ’å…¥Î©çš„å…·ä½“å…ƒç´ ï¼Œè€Œæ˜¯ä¼ªéšæœºåœ°æŠ½å‡ºä¸€ä¸ªï¼Œå¹¶å°†å…¶æ’å…¥ğ‘‹ã€‚
5.3 è¾ƒå¤§çš„æ ·æœ¬
random.sample(population, k)æ–¹æ³•å…è®¸æˆ‘ä»¬ä»ä¸€ä¸ªç¾¤ä½“ï¼ˆä¸€ä¸ªç“®ï¼‰ä¸­æŠ½å–ä¸€ä¸ªå¤§å°ä¸ºğ‘˜çš„æ ·æœ¬--ç”¨é‡åˆæ–¹å¼æŠ½å–ã€‚å¯¹äºğ‘˜=1ï¼Œè¿™å¯¹åº”äºäººå£çš„å‡åŒ€åˆ†å¸ƒã€‚é€šè¿‡random.choice(population, weights=None, *, cum_weights=None, k=1)æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä»äººå£ä¸­æŠ½æ ·ğ‘˜æ¬¡ï¼ˆä¹Ÿå¯ä»¥åˆ†é…æƒé‡è€Œä¸æ˜¯åˆé€‚çš„äººå£ï¼‰ã€‚